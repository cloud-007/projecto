{% extends 'base.html' %}
{% load static %}
{% block content %}
    <div class=" d-flex justify-content-center">
        <div class="profile-block p-3 mb-5">
            <form id="id_form" method="post" enctype="multipart/form-data">
                {% csrf_token %}

                {% for message in messages %}
                    <p class="alert alert-warning">
                        {{ message }}
                    </p>
                {% endfor %}
                <h4 class="text-black-70">Add a new course</h4>
                {% include 'divider.html' %}

                <div class="form-group ">
                    <label>Select Course</label>
                    <div class="d-flex">
                        <input type="button" class="btn btn-secondary input-field"
                               id="id_cse3300"
                               style="width: 100%; background: #6C757D; color: white"
                               value="CSE 3300"
                               onclick="toggleCourse('3300')"
                        >
                        <input type="button" class="btn btn-secondary input-field"
                               id="id_cse4800"
                               style="width: 100%"
                               value="CSE 4800"
                               onclick="toggleCourse('4800')"
                        >
                        <input type="hidden" id="id_course_code"
                               name="course_code" value="CSE 3300">
                    </div>
                    <label for="id_course_title" class="mt-1">Course
                        Title
                    </label>
                    <input
                            type="text"
                            class="form-control input-field"
                            id="id_course_title"
                            name="course_title"
                            required
                            value="Project i"
                    />
                    <label class="mt-1">Select Semester</label>
                    <div class="input-group mt-1 d-flex">
                        <input id="id_semester"
                               class="btn btn-primary btn-secondary dropdown-toggle"
                               type="button" data-bs-toggle="dropdown"
                               name="selected_semester"
                               aria-expanded="false"
                               value="Spring"
                        >
                        <ul class="dropdown-menu">
                            <li>
                                <a class="dropdown-item" href="#"
                                   onclick="document.getElementById('id_semester').value = 'Spring';
                                    selectedSemester = 'Spring';
                                    ">Spring</a>
                            </li>
                            <li>
                                <a class="dropdown-item" href="#"
                                   onclick="document.getElementById('id_semester').value = 'Summer';
                                    selectedSemester = 'Summer';
                                    ">Summer</a>
                            </li>
                        </ul>
                        <input type="number"
                               id="id_year"
                               class="form-control input-field"
                               aria-label="Text input with dropdown button"
                               placeholder="Year"
                               min="2000" max="9999"
                               required
                        >
                        <input type="hidden" id="id_update_semester"
                               name="semester">
                    </div>
                    <label for="id_deadline"
                           class="mt-1">Deadline</label>
                    <input
                            type="date"
                            class="form-control input-field"
                            style="display: block"
                            id="id_deadline"
                            name="deadline"
                            placeholder="Pick a date"
                            required
                            value="{{ course.deadline }}"
                    />
                    <button
                            type="submit"
                            class="btn btn-primary signInBtn mt-4"
                            style="width: 100%; margin-bottom: -10px"
                            onclick="updateValue()"
                    >
                        Add Course
                    </button>
                </div>
            </form>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"
            integrity="sha512-aVKKRRi/Q/YV+4mjoKBsE4x3H+BkegoM/em46NNlCqNTmUYADjBbeNefNxYV7giUp0VxICtqdrbqU7iVaeZNXA=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script type="text/javascript">
        selectedCourse = 'CSE 3300'
        courseTitle = 'Project i'
        selectedSemester = 'Spring'

        function toggleCourse(courseCode) {
            if (courseCode === "3300") {
                this.selectedCourse = "CSE 3300";
                this.courseTitle = 'Project i'
                const cse3300 = document.getElementById("id_cse3300")
                const cse4800 = document.getElementById("id_cse4800")
                cse3300.style.background = "#6C757D"
                cse3300.style.color = "white"
                cse4800.style.background = "white"
                cse4800.style.color = "black"

                document.getElementById("id_course_title").value = "Project i"
                document.getElementById("id_course_code").value = "CSE 3300"
            } else {
                this.selectedCourse = "CSE 4800";
                this.courseTitle = 'Project ii Part i'

                const cse3300 = document.getElementById("id_cse3300")
                const cse4800 = document.getElementById("id_cse4800")
                cse3300.style.background = "white"
                cse3300.style.color = "black"
                cse4800.style.background = "#6C757D"
                cse4800.style.color = "white"

                document.getElementById("id_course_title").value = "Project ii Part i"
                document.getElementById("id_course_code").value = "CSE 4800"
            }
        }

        function updateValue() {
            const semester = document.getElementById("id_update_semester")
            semester.value = document.getElementById("id_semester").value + " " +
                document.getElementById("id_year").value;

        }

    </script>
{% endblock %}